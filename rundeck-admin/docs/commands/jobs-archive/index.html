<!DOCTYPE html>
<html>
<head>
    <meta http-eqiv='content-type' content='text/html;charset=utf-8'>
    <title>jobs-archive</title>
    <link rel=stylesheet type="text/css" 
          href="../../docs.css">
</head>
<body>
 <div id=container>
   <p><a href="../../index.html">rundeck-admin</a></p>

<h1>jobs-archive</h1>

<p>Archive job files suitable for project import.</p>

<h2>SYNOPSIS</h2>

<pre><code>rerun rundeck-admin:jobs-archive [--dir &lt;&gt;] [--archive &lt;&gt;]
</code></pre>

<h3>OPTIONS</h3>

<ul>
<li><a href="../../options/dir/index.html">   [&ndash;dir &lt;>]: directory path</a></li>
<li><a href="../../options/archive/index.html">   [&ndash;archive &lt;>]: the archive file.</a></li>
</ul>


<h2>README</h2>

<p>Use <strong>jobs-archive</strong> to create an archive of job definitions suitable for import with project-import.</p>

<p>The <code>--dir &lt;&gt;</code> option specifies the directory to look for jobs. Any jobs in subdirectories
will also be included.
If no <code>--dir &lt;&gt;</code> is specified, the current working directory is used.</p>

<p>Job definitions must be files in <a href="http://rundeck.org/docs/manpages/man5/job-v20.html">Job XML format</a>. Job definitions can contain more than one job. This command specifically checks
a /joblist/job/name element in the job definition files.</p>

<h2>Examples</h2>

<p>Assume a directory structure with two job definition files:</p>

<pre><code>/tmp/myjobs
  |-- job-1.xml
  `-- subdir
       `-- job-2.xml
</code></pre>

<p>Create an archive called &ldquo;myjobs.zip&rdquo; from any jobs found in directory &ldquo;/tmp/myjobs&rdquo;:</p>

<pre><code>rerun rundeck-admin: jobs-archive --archive myjobs.zip --dir /tmp/myjobs
</code></pre>

<p>If <code>--archive &lt;&gt;</code> is unspecified, the archive file name will default to the name of the directory.</p>

<pre><code>rerun rundeck-admin: jobs-archive --dir /tmp/myjobs
</code></pre>

<p>Will produce an archive called &ldquo;myjobs.zip&rdquo;.</p>

<p>With out any options, the command will look for jobs in the current working dirctory:</p>

<pre><code>cd /tmp/myjobs
rerun rundeck-admin: jobs-archive 
ls -l myjobs.zip
</code></pre>

<h2>TESTS</h2>

<p>Use the <code>stubbs:test</code> command to to run test plans.</p>

<pre><code>rerun stubbs:test -m rundeck-admin -p jobs-archive
</code></pre>

<p><em>Test plan sources</em></p>

<ul>
<li><a href="../../tests/jobs-archive-1.html">jobs-archive-1</a>

<ul>
<li>it fails if no job files found</li>
<li>it archives job file dirs recursively</li>
<li>it ignores bogus xml files</li>
</ul>
</li>
</ul>


<h2>SCRIPT</h2>

<p>To edit the command script for the rundeck-admin:jobs-archive command,
use the <code>stubbs:edit</code>
command. It will open the command script in your shell EDITOR.</p>

<pre><code>rerun stubbs:edit -m rundeck-admin -c jobs-archive
</code></pre>

<p><em>Script source</em></p>

<ul>
<li><a href="script.html">script</a>: <code>RERUN_MODULE_DIR/commands/jobs-archive/script</code></li>
</ul>


<h2>METADATA</h2>

<ul>
<li><code>NAME</code> = jobs-archive</li>
<li><code>DESCRIPTION</code> = &ldquo;Archive job files suitable for project import.&rdquo;</li>
<li><code>OPTIONS</code> = &ldquo;dir archive&rdquo;</li>
</ul>


<hr />

<p><em>Generated by stubbs:docs Thu Jul 30 18:22:56 GMT 2015</em></p>
 </div>
</body>
</html>
